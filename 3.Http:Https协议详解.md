Http权威指南

https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Cache-Control

http://blog.csdn.net/jiana227/article/details/7732227

------
HTTP(HyperText Transfer Protocol)是一套计算机通过网络进行通信的规则。计算机专家设计出HTTP，使HTTP客户（如Web浏览器）能够从HTTP服务器(Web服务器)请求信息和服务。HTTP遵循请求(Request)/应答(Response)模型。Web浏览器向Web服务器发送请求，Web服务器处理请求并返回适当的应答。所有HTTP连接都被构造成一套请求和应答。

## 1. Request

HTTP请求报文由三部分组成分别是`request line`、`request header`、`request body` 下图是一个实际的请求报文

![icon](http://dl.iteye.com/upload/attachment/0069/3451/412b4451-2738-3ebc-b1f6-a0cc13b9697b.jpg)

### 1.1 request line 请求行
如上图中第一行中显示，请求行的内容包含了`请求方法`、`请求URI`以及`HTTP协议版本号`

#### 1.1.1 请求方法
`GET`

GET方法请求一个指定资源的表示形式. 使用GET的请求应该只被用于获取数据。

`POST`

POST方法用于将实体提交到指定的资源，通常导致状态或服务器上的副作用的更改。

`HEAD`

HEAD方法请求一个与GET请求的响应相同的响应，但没有响应体。

`PUT`

PUT方法用请求有效载荷替换目标资源的所有当前表示。

`DELETE`

DELETE方法删除指定的资源。

`CONNECT`

CONNECT方法建立一个到由目标资源标识的服务器的隧道。

`OPTIONS`

OPTIONS方法用于描述目标资源的通信选项。

`TRACE`

TRACE方法沿着到目标资源的路径执行一个消息环回测试。

`PATCH`

PATCH方法用于对资源应用部分修改。

以上请求方法，笔者只用到过2个`GET`和`POST`，所以暂且只着重介绍这两种方法。在我理解上GET应该用于固定资源或者不常改动资源的获取比如新闻列表、中国省市区信息、图片资源等。POST用于可能会改变服务器上的资源的请求。在实际应用中GET和POST并没有严格遵守http规范，有的图方便更新资源时用了GET，包括对资源的增，删，改，查操作，其实都可以通过GET/POST完成，因此造就了应用开发当中一些不规范的操作。

##### 常见误区

1. **GET请求数据只能附在URL之后**

 事实上GET请求参数也可以放在body当中，但是正常情况下是放在URL的QUERY中
 
2. **GET方式提交数据大小有限制**

   实际上，URL不存在参数上限的问题，HTTP协议规范没有对URL长度进行限制。这个限制是特定的浏览器及服务器对它的限制。IE对URL长度的限制是2083字节(2K+35)。对于其他浏览器，如Netscape、FireFox等，理论上没有长度限制，其限制取决于操作系统的支持。
 
##### GET和POST主要区别

 
|               | GET           | POST  |
| ------------- |:-------------:| :-----:|
| 缓存         | 可以被缓存 | 不能缓存，If-Modified-Since ， If-None-Match等对其无效 |
| 编码类型      | application/x-www-form-urlencoded      |   application/x-www-form-urlencoded 或 multipart/form-data。为二进制数据使用多重编码。 |
| 历史 | 参数保留在浏览器历史中。      |    参数不会保存在浏览器历史中。 |
| 对数据类型的限制 | 只允许 ASCII 字符。      |    没有限制。也允许二进制数据。 |
| 安全性 | **与 POST 相比**，GET 的安全性较差，因为所发送的数据是 URL 的一部分。在发送密码或其他敏感信息时绝不要使用 GET ！      |   本质上POST也不安全，硬分个高低，POST **比GET**更安全，因为参数不会被保存在浏览器历史或 web 服务器日志中。 |


如果从HTTP规范定义方面来讲，POST是比GET安全性要低的，因为GET只能获取资源，POST可以修改资源。但是POST能做的事GET也能做到，所以其实在这方面不存在安全性高低的问题。另外一点GET请求参数跟在URL后面，可以被明眼看到，而且URL会保存在浏览器历史记录当中，POST请求参数在body当中不会被浏览器记录，但是POST其实通过一些抓包工具也能够轻易抓取body当中的数据，所以这2种方式安全性都很低，如果硬要分个高低，那POST确实比GET安全性高一些。

#### 1.1.2 请求URI
统一资源标识符，用来唯一的标识一个资源，URL是一种具体的URI，它不仅唯一标识资源，而且还提供了定位该资源的信息。

#### 1.1.3 HTTP协议版本号
http比较常用的版本是1.0、1.1、2.0

**http 1.1 与http 1.0主要区别**

- `长连接` **1.1**默认开启开启长连接,只有当一方header当中connection 为close时才关闭连接。**1.0版本**通过Keep-Alive 可以延长链接，但是需要将 The Connection 首部的值设置为  "keep-alive" 这个首部才有意义。
- `HOST域`  HTTP1.1在Request消息头里头多了一个Host域，而且是必传的，HTTP1.0则没有这个域。在HTTP1.0中认为每台服务器都绑定一个唯一的IP地址,但随着虚拟主机技术的发 展，在一台物理服务器上可以存在多个虚拟主机（Multi-homed Web Servers），并且它们共享一个IP地址。
- `带宽优化` HTTP/1.1中在请求消息中引入了range头域，它支持只请求资源的某个部分。在响应消息中Content-Range头域声明了返回的这部分对象的偏移值和长度。
- `状态码` http/1.1中新增了一些状态码，比如重定向3xx就添加了几个，具体不记得了。
- ...

**http 2.0 与http 1.x 主要区别**

- `多路复用` HTTP2.0使用了多路复用的技术，做到同一个连接并发处理多个请求，而且并发请求的数量比HTTP1.1大了好几个数量级。
- `数据压缩` HTTP1.1不支持header数据的压缩，HTTP2.0使用HPACK算法对header的数据进行压缩，这样数据体积小了，完成一个请求的效率就提高了。
- `服务器推送` 当我们对支持HTTP2.0的web server请求数据的时候，服务器会顺便把一些客户端需要的资源一起推送到客户端，免得客户端再次创建连接发送请求到服务器端获取。这种方式非常合适加载静态资源。客户端通过 RESET_STREAM 可以主动取消 Push，也可以使用一个简洁的 Cache Digest 来告诉服务器，哪些东西已经在缓存，因此服务器也就会知道哪些是客户端所需要的。
- ...

1
2
3
4


