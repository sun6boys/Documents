PPPoE带来了好处，也带来了一些坏处，比如：二次封装耗费资源，降低了传输效能等等，这些坏处俺也不多说了，最大的坏处就是PPPoE导致MTU变小了以太网的MTU是1500，再减去PPP的包头包尾的开销（8Bytes），就变成1492。

http://blog.51cto.com/infotech/123859

因为TCP协议需要可靠，所以为什么TCP协议要双方协商MSS值


IP分片与TCP分段的区别：

IP分片产生的原因是网络层的MTU；TCP分段产生原因是MSS
IP分片由网络层完成，也在网络层进行重组；TCP分段是在传输层完成，并在传输层进行重组
对于以太网，MSS为1460字节，而MUT往往会大于MSS
        故采用TCP协议进行数据传输，是不会造成IP分片的。若数据过大，只会在传输层进行数据分段，到了IP层就不用分片。而我们常提到的IP分片是由于UDP传输协议造成的，因为UDP传输协议并未限定传输数据报的大小 
        
MSS主要原因是不能让TCP包过大，如果过大，那么在IP传输中分片的可能性就会增大，这样就失去了可靠性。因此合理的MSS是至关重要的。MSS的合理值应为保证数据包不分片的最大值。对于以太网MSS可以达到1460byte.

MTU=MSS+TCP Header+IP Header.

滑动窗口  http://blog.csdn.net/wdscq1234/article/details/52444277



---------
目前大多数app和服务器通信的时候才有的HTTP应用层协议，而HTTP又是TCP协议实现的，所以TCP协议的重要性不言而喻。TCP是一个传输层协议位于IP协议网络层之上。从很多书籍和资料上解释TCP是可靠的传输层协议。结合下面的内容就会得到分析为什么TCP协议是可靠的传输层协议。

### 1.TCP Header
一个TCP包由header和payload组成，payload就是待传输的数据，header信息中包含了一些对payload的描述以及一些TCP传输控制策略等，如下图。

![icon](http://p.blog.csdn.net/images/p_blog_csdn_net/lpnueg4/EntryImages/20091120/TCP+bit%E5%89%AF%E6%9C%AC.png)


- **Source Port** `源端口号`标识发送主机发起传送的应用程序。端口号在IP总结一文中作了解释，所以当时为什么说端口号应属于传输层当中的内容。
- **Destonation Port** `目标端口号` 标识目标主机接收数据的应用程序。
- **Sequence Number** `序列号` 标识该TCP包中payload第一个字节的编号，发送方必填。
- **Acknowledgment Number** `确认号` 接收方每次接收到发送方传来的数据包需要告诉发送方我已经收到了该数据（TCP可靠性体现之一，当然也并不是每个包都会被回复，下文会具体叙述），`确认号` = `序号和` + payload字节数 + 1,代表期待对方下次可以从序号号为**Acknowledgment Number**开始发送。意思是（Acknowledgment Number - 1）和它之前的数据已经成功收到，不需要重发那些。
- **Data Offset** 4位，也就是头部长度，指出TCP负载（数据）的开始位置。以4字节为单位，如"0101"表示20字节位置的数据为负载开始，也就是头部长度为20字节。
- **Control Falg** `控制标记`
 - **URG** 如果数值为1，表示这是一个携有紧急资料的封包
 - **ACK** 如果数值为1，表示该包需要回复，正常情况都是1
 - **PSH** 如果为1，接收方会将该包直接从网络层交付给应用层处理，跳过了TCP
 - **SYN** 如果为1 表示双方进行同步沟通
 - **FIN** 如果未1 表示任意一方已经没有数据传输了，请求终止链接。

- **Window** `窗口` 接收窗口大小。用来进行流量控制，单位字节数。发送方有发送窗口，接收方有接收窗口，窗口大小代表着处理数据的能力，如果接收方发送数据的速度大于接收方处理数据的能力，那多余的数据将会丢失。
- **Checksum** `校验位`16位，对整个TCP报文段，即TCP头部和TCP数据进行校验和计算，并由目标端进行验证。当资料要传送出去的时候发送端会计算好封包资料大小然後得出这个检验值封包一起发送当接收端收到封包之後会再对资料大小进行计算看看是否和检验值一致如果结果不相称则被视为残缺封包会要求对方重发该个封包。
- ...

### 2. TCP分片
在[IP协议总结](https://github.com/sun6boys/Documents/blob/master/1.IP%E5%8D%8F%E8%AE%AE%E6%80%BB%E7%BB%93.md)中说到当数据包在经过网络层，如果数据包体积超过了MTU，会把数据包分片传输。IP包在复杂的网络传输当中，可能会发生各种意外情况，比如丢包等等。TCP既然被称为可靠的协议，显然要改变这个状况。

可靠性最大的体现在发送方给接收方的数据都能够接收到，如果某一个数据没有接收到，发送方需要重新给接收方再次发送。

所以TCP的header当中**Sequence Number**和**Acknowledgment Number**就是为了实现确认和重发功能，具体见上文。
 